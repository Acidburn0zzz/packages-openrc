# Maintainer: udeved <udeved@openrc4arch.site40.net>

_pn=openrc-plugins
_rn=nvidia-utils

pkgname=$_rn-openrc
pkgver=0.9.4
pkgrel=1
pkgdesc="OpenRC $_rn no xorg init script"
arch=('any')
url="http://openrc4arch.site40.net"
license=('GPL2')
depends=('openrc' "$_rn" 'udev-init-scripts')
install=$_rn.install
_my_url=("http://sources.gentoo.org/cgi-bin/viewvc.cgi/gentoo-x86/x11-drivers/nvidia-drivers/files")
source=("$url/pool/archlinux/$_pn-$pkgver.tar.xz"
		"$_my_url/nvidia-udev.sh"
		"$_my_url/nvidia.udev-rule")

package() {
	install -Dm755 "$srcdir/$_pn/nvidia-drivers/init.d/nvidia-smi.init" "$pkgdir/etc/init.d/nvidia-smi"
	
	install -Dm755 "$srcdir/nvidia-udev.sh" "$pkgdir/usr/lib/udev/nvidia-udev.sh"
	
	install -Dm755 "$srcdir/nvidia.udev-rule" "$pkgdir/usr/lib/udev/rules.d/99-nvidia.rules"
	
	sed -e 's|#!/bin/sh|#!/usr/bin/sh|' -e 's|/opt/bin/nvidia-smi|/usr/bin/nvidia-smi|g' -i "$pkgdir/usr/lib/udev/nvidia-udev.sh"

}
sha256sums=('a66d44c1c1befff0d6355af6254ef968fcda337e0e23b18a51ecd1ed73f763ce'
            '120c0af2b64fbcbd7032217a78eec8b104874c1ca68726367bce22c57944e07e'
            '37b152a5055a16d1947171567178e2841679ddf03dba9d48e7d30f1e3b469ac6')
            
