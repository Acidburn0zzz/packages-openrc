# Maintainer: udeved <udeved@openrc4arch.site40.net>

_rn=avahi
_pv=0.6.31

pkgname=$_rn-openrc
pkgver=0.9.4
pkgrel=1
pkgdesc="OpenRC $_rn init script"
arch=('any')
url="http://openrc4arch.site40.net"
license=('GPL2')
groups=('openrc-desktop')
depends=('openrc' "$_rn" 'dbus-openrc')
install=$_rn.install
source=("http://avahi.org/download/$_rn-$_pv.tar.gz")

package() {
	install -Dm755 "${srcdir}/$_rn-$_pv/initscript/gentoo/avahi-daemon.in" "${pkgdir}/etc/init.d/avahi-daemon"
	install -Dm755 "${srcdir}/$_rn-$_pv/initscript/gentoo/avahi-dnsconfd.in" "${pkgdir}/etc/init.d/avahi-dnsconfd"
	
	sed -e 's|#!/sbin/runscript|#!/usr/bin/runscript|' -e 's|opts|extra_started_commands|' -e 's|@sbindir@|/usr/bin|' -i "${pkgdir}/etc/init.d/avahi-daemon"

	sed -e 's|#!/sbin/runscript|#!/usr/bin/runscript|' -e 's|opts|extra_started_commands|' -e 's|@sbindir@|/usr/bin|' -i "${pkgdir}/etc/init.d/avahi-dnsconfd"
	
}
sha256sums=('8372719b24e2dd75de6f59bb1315e600db4fd092805bd1201ed0cb651a2dab48')
