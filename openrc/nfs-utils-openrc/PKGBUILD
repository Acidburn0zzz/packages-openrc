# Maintainer: udeved <udeved@openrc4arch.site40.net>

_pn=openrc-plugins
_rn=nfs-utils

pkgname=$_rn-openrc
pkgver=0.8.3
pkgrel=1
pkgdesc="OpenRC $_rn init script"
arch=('any')
url="http://openrc4arch.site40.net"
license=('GPL2')
groups=('openrc-net')
depends=('openrc' "$_rn" 'rpcbind-openrc' 'device-mapper-openrc')
install=$_rn.install
source=("$url/pool/archlinux/$_pn-$pkgver.tar.xz")

package() {

	install -Dm755 "$srcdir/$_pn/$_rn/init.d/nfsmount.initd" "$pkgdir/etc/init.d/nfsmount"

	install -Dm755 "$srcdir/$_pn/$_rn/init.d/rpc.gssd.initd" "$pkgdir/etc/init.d/rpc.gssd"
	
	install -Dm755 "$srcdir/$_pn/$_rn/init.d/rpc.idmapd.initd" "$pkgdir/etc/init.d/rpc.idmapd"

	install -Dm755 "$srcdir/$_pn/$_rn/init.d/rpc.pipefs.initd" "$pkgdir/etc/init.d/rpc.pipefs"

	install -Dm755 "$srcdir/$_pn/$_rn/init.d/rpc.statd.initd" "$pkgdir/etc/init.d/rpc.statd"

	install -Dm755 "$srcdir/$_pn/$_rn/init.d/rpc.svcgssd.initd" "$pkgdir/etc/init.d/rpc.svcgssd"
	
# 	if [ -f '/etc/conf.d/nfs' ]; then
# 		install -Dm755 "$srcdir/$_pn/$_rn/conf.d/nfs.confd" "$pkgdir/etc/conf.d/nfs-rc"
# 		install -Dm755 "$srcdir/$_pn/$_rn/init.d/nfs.initd" "$pkgdir/etc/init.d/nfs-rc"
# 		
# 		sed -e 's|/etc/conf.d/nfs|/etc/conf.d/nfs-rc|' $pkgdir/etc/init.d/nfsmount
# 		
# 		sed -e 's|/etc/conf.d/nfs|/etc/conf.d/nfs-rc|' $pkgdir/etc/init.d/rpc.gssd
# 		
# 		sed -e 's|/etc/conf.d/nfs|/etc/conf.d/nfs-rc|' $pkgdir/etc/init.d/rpc.idmapd
# 		
# 		sed -e 's|/etc/conf.d/nfs|/etc/conf.d/nfs-rc|' $pkgdir/etc/init.d/rpc.statd
# 		
# 		sed -e 's|/etc/conf.d/nfs|/etc/conf.d/nfs-rc|' $pkgdir/etc/init.d/rpc.svcgssd
# 	else
		install -Dm755 "$srcdir/$_pn/$_rn/conf.d/nfs.confd" "$pkgdir/etc/conf.d/nfs"
		install -Dm755 "$srcdir/$_pn/$_rn/init.d/nfs.initd" "$pkgdir/etc/init.d/nfs"
	#fi

}
sha256sums=('076eba167d318ae9d4652fea87e6620ead22a301170e8f47e34821330f118a73')
